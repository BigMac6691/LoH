# Frontend HTTPS Setup

## What Changed

The frontend Vite dev server now supports HTTPS using the same certificates as the backend.

## Before vs After

### Before:
- **Frontend:** `http://localhost:5173` ‚ùå HTTP (unencrypted)
- **Backend:** `https://localhost:3000` ‚úÖ HTTPS (encrypted)
- **Result:** Passwords sent over HTTP initially, only encrypted to backend

### After:
- **Frontend:** `https://localhost:5173` ‚úÖ HTTPS (encrypted)
- **Backend:** `https://localhost:3000` ‚úÖ HTTPS (encrypted)
- **Result:** Full end-to-end encryption, matches production!

## How to Use

### Step 1: Restart Frontend Dev Server

If your frontend is running, restart it:

```bash
# Stop current frontend (Ctrl+C)
# Then restart:
cd frontend
npm run dev
```

### Step 2: Access via HTTPS

**Old URL (will redirect or fail):**
```
http://localhost:5173
```

**New URL (what you should use):**
```
https://localhost:5173
```

### Step 3: Accept Certificate Warning (First Time)

Since you're using self-signed certificates:
1. Browser will show a security warning
2. Click "Advanced" ‚Üí "Proceed to localhost (unsafe)"
3. This is safe for localhost development
4. The warning won't appear again after you accept it

### Step 4: Look for Security Indicators

**You should now see:**
- ‚úÖ **Lock icon** in browser address bar (üîí)
- ‚úÖ **"Connection is secure"** message
- ‚úÖ **`https://`** in the URL
- ‚úÖ All requests encrypted end-to-end

## What This Means

### Security:
- ‚úÖ **Full encryption:** Browser ‚Üí Frontend ‚Üí Backend all HTTPS
- ‚úÖ **Passwords encrypted:** Even on initial input
- ‚úÖ **No mixed content:** Everything uses HTTPS
- ‚úÖ **Production simulation:** Matches how it works in production

### Development:
- ‚úÖ **Same certificates:** Uses your `mkcert` certificates
- ‚úÖ **Auto-detects:** Automatically enables HTTPS if certificates exist
- ‚úÖ **Falls back to HTTP:** If certificates not found (with warning)

## Troubleshooting

### "Certificate files not found"

**Solution:**
```bash
cd ~/projects/LoH
mkcert localhost 127.0.0.1
```

This creates the certificate files the frontend needs.

### Frontend still using HTTP

**Check:**
1. Did you restart the dev server?
2. Are certificates in project root? (`ls -la localhost+1*.pem`)
3. Check console output for "üîí Frontend: HTTPS enabled" message

### Browser won't connect

**Try:**
1. Clear browser cache
2. Try incognito/private mode
3. Use `https://localhost:5173` (not `http://`)

### Mixed Content Warnings

**If you see mixed content warnings:**
- Make sure you're accessing via `https://localhost:5173`
- Not `http://localhost:5173`
- All resources should load over HTTPS

## Testing

### Test Full Flow:

1. **Open:** `https://localhost:5173`
2. **Look for:** Lock icon (üîí) in address bar
3. **Check:** Browser shows "Connection is secure"
4. **Login:** Try logging in - data should be encrypted
5. **Network Tab:** Check that all requests use HTTPS

### Verify Encryption:

**Open browser DevTools ‚Üí Network tab:**
- All requests should show `https://`
- Protocol column shows "h2" or "http/2" (HTTPS indicator)
- No "Mixed Content" warnings

## Production Notes

In production:
- ‚úÖ Use HTTPS everywhere (handled by hosting provider)
- ‚úÖ Real SSL certificates (Let's Encrypt, etc.)
- ‚úÖ Automatic redirect from HTTP to HTTPS
- ‚úÖ This development setup simulates that behavior

## Quick Reference

**URLs:**
- Frontend: `https://localhost:5173` ‚úÖ
- Backend: `https://localhost:3000` ‚úÖ

**Certificates:**
- Location: Project root (`~/projects/LoH/`)
- Files: `localhost+1.pem` and `localhost+1-key.pem`
- Generated by: `mkcert localhost 127.0.0.1`

**Auto-enables:** Frontend will automatically use HTTPS if certificates are found!

