<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star and Economy Class Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        .test-section {
            background-color: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .test-result {
            background-color: #333;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }
        .success { border-left: 4px solid #4CAF50; }
        .error { border-left: 4px solid #f44336; }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        input {
            padding: 8px;
            margin: 5px;
            border-radius: 4px;
            border: 1px solid #444;
            background-color: #333;
            color: white;
        }
    </style>
</head>
<body>
    <h1>Star and Economy Class Test</h1>
    
    <div class="test-section">
        <h2>Basic Star Creation</h2>
        <button onclick="testBasicStar()">Test Basic Star</button>
        <div id="basic-star-result" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>Star with Economy</h2>
        <button onclick="testStarWithEconomy()">Test Star with Economy</button>
        <div id="star-economy-result" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>Star Ownership</h2>
        <button onclick="testStarOwnership()">Test Star Ownership</button>
        <div id="star-ownership-result" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>Economy Investment</h2>
        <input type="number" id="investment-amount" placeholder="Investment amount" value="10">
        <button onclick="testEconomyInvestment()">Test Economy Investment</button>
        <div id="economy-investment-result" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>Star Distance Calculation</h2>
        <button onclick="testStarDistance()">Test Star Distance</button>
        <div id="star-distance-result" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>Star Cloning</h2>
        <button onclick="testStarCloning()">Test Star Cloning</button>
        <div id="star-cloning-result" class="test-result"></div>
    </div>

    <script type="module">
        import { Star } from './shared/Star.js';
        import { Economy } from './shared/Economy.js';

        window.testBasicStar = function() {
            const resultDiv = document.getElementById('basic-star-result');
            try {
                const sector = { row: 0, col: 0 };
                const star = new Star({
                    id: 1,
                    x: 100,
                    y: 200,
                    z: 50,
                    sector: sector,
                    resourceValue: 75
                });

                const summary = star.getSummary();
                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>Success!</strong><br>
                        Star created with ID: ${star.id}<br>
                        Resource Value: ${star.getResourceValue()}<br>
                        Position: (${star.x}, ${star.y}, ${star.z})<br>
                        Owner: ${star.getOwner() || 'None'}<br>
                        Has Economy: ${star.hasEconomy()}<br>
                        <pre>${JSON.stringify(summary, null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error"><strong>Error:</strong> ${error.message}</div>`;
            }
        };

        window.testStarWithEconomy = function() {
            const resultDiv = document.getElementById('star-economy-result');
            try {
                const sector = { row: 1, col: 1 };
                const star = new Star({
                    id: 2,
                    x: 150,
                    y: 250,
                    z: 75,
                    sector: sector,
                    resourceValue: 60,
                    hasEconomy: true
                });

                const economy = star.getEconomy();
                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>Success!</strong><br>
                        Star created with economy<br>
                        Industrial Value: ${economy.industrialValue}<br>
                        Total Economic Value: ${economy.getTotalValue()}<br>
                        <pre>${JSON.stringify(economy.getSummary(), null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error"><strong>Error:</strong> ${error.message}</div>`;
            }
        };

        window.testStarOwnership = function() {
            const resultDiv = document.getElementById('star-ownership-result');
            try {
                const sector = { row: 2, col: 2 };
                const star = new Star({
                    id: 3,
                    x: 200,
                    y: 300,
                    z: 100,
                    sector: sector,
                    resourceValue: 85
                });

                const player = { id: 1, name: 'Player1', color: '#FF0000' };
                
                // Test ownership assignment
                star.assignOwner(player);
                const isOwned = star.isOwned();
                const owner = star.getOwner();
                
                // Test ownership removal
                star.removeOwner();
                const isOwnedAfter = star.isOwned();
                const ownerAfter = star.getOwner();

                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>Success!</strong><br>
                        Before assignment: Owned = ${false}<br>
                        After assignment: Owned = ${isOwned}, Owner = ${owner.name}<br>
                        After removal: Owned = ${isOwnedAfter}, Owner = ${ownerAfter || 'None'}<br>
                        Color after assignment: ${star.color}<br>
                        Color after removal: ${star.color}
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error"><strong>Error:</strong> ${error.message}</div>`;
            }
        };

        window.testEconomyInvestment = function() {
            const resultDiv = document.getElementById('economy-investment-result');
            try {
                const amount = parseInt(document.getElementById('investment-amount').value) || 10;
                const economy = new Economy();
                
                const initialValue = economy.industrialValue;
                const newValue = economy.invest(amount);
                const totalValue = economy.getTotalValue();

                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>Success!</strong><br>
                        Initial Industrial Value: ${initialValue}<br>
                        Investment Amount: ${amount}<br>
                        New Industrial Value: ${newValue}<br>
                        Total Economic Value: ${totalValue}<br>
                        <pre>${JSON.stringify(economy.getSummary(), null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error"><strong>Error:</strong> ${error.message}</div>`;
            }
        };

        window.testStarDistance = function() {
            const resultDiv = document.getElementById('star-distance-result');
            try {
                const sector = { row: 0, col: 0 };
                const star1 = new Star({
                    id: 4,
                    x: 0,
                    y: 0,
                    z: 0,
                    sector: sector,
                    resourceValue: 50
                });

                const star2 = new Star({
                    id: 5,
                    x: 3,
                    y: 4,
                    z: 0,
                    sector: sector,
                    resourceValue: 60
                });

                const distance = star1.getDistanceTo(star2);
                const expectedDistance = 5; // 3-4-5 triangle

                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>Success!</strong><br>
                        Star 1: (${star1.x}, ${star1.y}, ${star1.z})<br>
                        Star 2: (${star2.x}, ${star2.y}, ${star2.z})<br>
                        Calculated Distance: ${distance}<br>
                        Expected Distance: ${expectedDistance}<br>
                        Distance Correct: ${Math.abs(distance - expectedDistance) < 0.01}
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error"><strong>Error:</strong> ${error.message}</div>`;
            }
        };

        window.testStarCloning = function() {
            const resultDiv = document.getElementById('star-cloning-result');
            try {
                const sector = { row: 3, col: 3 };
                const originalStar = new Star({
                    id: 6,
                    x: 300,
                    y: 400,
                    z: 150,
                    sector: sector,
                    resourceValue: 90,
                    hasEconomy: true
                });

                // Add some economy investment
                const economy = originalStar.getEconomy();
                economy.invest(25);

                // Assign an owner
                const player = { id: 2, name: 'Player2', color: '#00FF00' };
                originalStar.assignOwner(player);

                // Clone the star
                const clonedStar = originalStar.clone();

                resultDiv.innerHTML = `
                    <div class="success">
                        <strong>Success!</strong><br>
                        Original Star ID: ${originalStar.id}<br>
                        Cloned Star ID: ${clonedStar.id}<br>
                        Original Resource Value: ${originalStar.getResourceValue()}<br>
                        Cloned Resource Value: ${clonedStar.getResourceValue()}<br>
                        Original Owner: ${originalStar.getOwner()?.name || 'None'}<br>
                        Cloned Owner: ${clonedStar.getOwner()?.name || 'None'}<br>
                        Original Has Economy: ${originalStar.hasEconomy()}<br>
                        Cloned Has Economy: ${clonedStar.hasEconomy()}<br>
                        Original Industrial Value: ${originalStar.getEconomy()?.industrialValue || 'N/A'}<br>
                        Cloned Industrial Value: ${clonedStar.getEconomy()?.industrialValue || 'N/A'}
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error"><strong>Error:</strong> ${error.message}</div>`;
            }
        };
    </script>
</body>
</html> 